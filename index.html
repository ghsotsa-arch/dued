<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>All-in-One Chat & AI with Tabs</title>
  <style>
    body {
      font-family: sans-serif;
      margin: 20px;
    }
    #clock {
      font-size: 2em;
      margin-bottom: 10px;
    }
    #loginButtons button {
      margin: 5px;
      padding: 10px 20px;
      font-size: 1em;
      cursor: pointer;
    }
    /* Tabs */
    .tab {
      overflow: hidden;
      border-bottom: 2px solid #ccc;
      margin-top: 20px;
    }
    .tab button {
      background-color: inherit;
      border: none;
      outline: none;
      padding: 14px 20px;
      cursor: pointer;
      font-size: 16px;
      transition: 0.3s;
    }
    .tab button:hover { background-color: #ddd; }
    .tab button.active { background-color: #ccc; }
    .tabcontent {
      position: absolute;      /* Keep rendered for widgets */
      left: -9999px;           /* Move off-screen */
      top: 0;
      width: 100%;
      height: 600px;
      visibility: hidden;      /* Hide visually */
    }
    .tabcontent.active {
      position: static;
      left: 0;
      visibility: visible;
    }
    iframe, #tlkio, #thinkstackBot {
      width: 100%;
      height: 100%;
      border-radius: 10px;
      border: 1px solid #ccc;
    }
  </style>
</head>
<body>
  <!-- Clock -->
  <div id="clock">--:--:--</div>
  <script>
    function updateClock() {
      const now = new Date();
      const hh = String(now.getHours()).padStart(2,'0');
      const mm = String(now.getMinutes()).padStart(2,'0');
      const ss = String(now.getSeconds()).padStart(2,'0');
      document.getElementById('clock').textContent = hh + ':' + mm + ':' + ss;
    }
    setInterval(updateClock, 1000);
    updateClock();
  </script>

  <!-- Firebase Login Buttons -->
  <div id="loginButtons">
    <button id="googleLogin">Login with Google</button>
    <button id="emailLogin">Login with Email</button>
    <button id="anonLogin">Login Anonymously</button>
  </div>
  <div id="userStatus"></div>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.23.0/firebase-auth-compat.js"></script>
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyA2NDDSOzIuUhWioTEfufSVowPTNcVM_Sg",
      authDomain: "dude-ba0b2.firebaseapp.com",
      projectId: "dude-ba0b2",
      storageBucket: "dude-ba0b2.appspot.com",
      messagingSenderId: "87241477123",
      appId: "1:87241477123:web:REPLACE_WITH_YOUR_APP_ID"
    };
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const userStatus = document.getElementById("userStatus");

    document.getElementById("googleLogin").onclick = () => {
      const provider = new firebase.auth.GoogleAuthProvider();
      auth.signInWithPopup(provider)
        .then(result => { userStatus.innerText = "Logged in as: " + result.user.displayName; })
        .catch(error => alert(error.message));
    };
    document.getElementById("emailLogin").onclick = async () => {
      const email = prompt("Enter email:");
      const password = prompt("Enter password:");
      try {
        await auth.signInWithEmailAndPassword(email, password);
        userStatus.innerText = "Logged in as: " + auth.currentUser.email;
      } catch (err) {
        if (err.code === "auth/user-not-found") {
          await auth.createUserWithEmailAndPassword(email, password);
          userStatus.innerText = "Account created & logged in as: " + auth.currentUser.email;
        } else {
          alert(err.message);
        }
      }
    };
    document.getElementById("anonLogin").onclick = () => {
      auth.signInAnonymously()
        .then(() => { userStatus.innerText = "Logged in anonymously"; })
        .catch(err => alert(err.message));
    };
    auth.onAuthStateChanged(user => {
      if(user) console.log("User signed in:", user);
      else console.log("No user signed in");
    });
  </script>

  <!-- Tabs -->
  <div class="tab">
    <button class="tablinks active" onclick="openTab(event,'Chat')">Text Chat</button>
    <button class="tablinks" onclick="openTab(event,'ScreenShare')">Screen Share</button>
    <button class="tablinks" onclick="openTab(event,'AIChat')">AI Chatbot</button>
  </div>

  <!-- Tab content -->
  <div id="Chat" class="tabcontent active">
    <div id="tlkio" data-channel="hey"></div>
    <script>
      const tlkioScript = document.createElement('script');
      tlkioScript.async = true;
      tlkioScript.src = 'http://tlk.io/embed.js';
      tlkioScript.type = 'text/javascript';
      document.getElementById('tlkio').appendChild(tlkioScript);
    </script>
  </div>

  <div id="ScreenShare" class="tabcontent">
    <iframe src="https://screensharing.metered.live/sbsjlvcvcd" allow="camera; microphone; display-capture; fullscreen"></iframe>
  </div>

  <div id="AIChat" class="tabcontent">
    <div id="thinkstackBot"></div>
    <script>
      const aiScript = document.createElement('script');
      aiScript.setAttribute('chatbot_id', '68cd7ea860d3284cb03acd1c');
      aiScript.setAttribute('data-type', 'default');
      aiScript.src = 'https://app.thinkstack.ai/bot/thinkstackai-loader.min.js';
      document.getElementById('thinkstackBot').appendChild(aiScript);
    </script>
  </div>

  <script>
    function openTab(evt, tabName) {
      const tabcontent = document.getElementsByClassName("tabcontent");
      for (let i=0;i<tabcontent.length;i++){ tabcontent[i].classList.remove("active"); }
      const tablinks = document.getElementsByClassName("tablinks");
      for (let i=0;i<tablinks.length;i++){ tablinks[i].classList.remove("active"); }
      document.getElementById(tabName).classList.add("active");
      evt.currentTarget.classList.add("active");
    }
  </script>

  <!-- Tawk.to -->
  <script type="text/javascript">
    var Tawk_API=Tawk_API||{}, Tawk_LoadStart=new Date();
    (function(){
      var s1=document.createElement("script"),s0=document.getElementsByTagName("script")[0];
      s1.async=true;
      s1.src='https://embed.tawk.to/68cd7587531e421921d0985a/1j5h966c8';
      s1.charset='UTF-8';
      s1.setAttribute('crossorigin','*');
      s0.parentNode.insertBefore(s1,s0);
    })();
  </script>
</body>
</html>

